<%= stylesheet_link_tag :application, "https://cdn.quilljs.com/1.3.6/quill.snow.css"%>
<h1 class="form_group" id="show_title"><%= sanitize @page.title_review%></h1>
<div class="ql-snow">
<div class="form_group ql-editor"><%= raw @page.content_review %></div>
</div>
<div id="divider_container">
	<hr id="cfs_divider">
</div>
<%= link_to "Edit", edit_page_path, class: "edit_button" %>
<div>
	<ul>
		<li>Created by: <%= @page.user.username %> on <%= @page.created_at.strftime("%B %-d, %Y at %l:%M %p") %></li>
		<% unless @page.last_user_edit.nil? %>
			<li>Last edited by: <%= @page.last_user_edit %> on <%= @page.updated_at.strftime("%B %-d, %Y at %l:%M %p") %></li>
		<% end %>
	<ul>
</div>

<h2>Supervisor Options</h2>
<!-- A supervisor cannot review a page they recently edited. -->
<% unless current_user.username.eql? "#{@page.last_user_edit}" %>

	<%= form_for @page do |f| %>
		<div>
				<%= hidden_field(:page, :title_review, value: @page.title_review) %>
				<%= hidden_field(:page, :content_review, value: @page.content_review) %>
				<%= hidden_field(:page, :category_review, value: @page.category_review) %>
		</div>
		<%= f.label :approval_status_id %>
		<%= collection_select :page, :approval_status_id, ApprovalStatus.order(:status).where.not(id: EXECUTIVE_VALUE), :id, :status, prompt: true %>
		<div>
		<%= f.submit "Submit Status", class: "edit_button" %>
		</div>
	<% end %>
<% end %>

<% if current_user.user_level_id == EXECUTIVE_VALUE && @page.approval_status_id == SUPERVISOR_VALUE %>
	<%= form_for @page, :url => { :action => "executive_update" } do |f| %>
		<div>
			<%= hidden_field(:page, :title, value: @page.title_review) %>
			<%= hidden_field(:page, :content, value: @page.content_review) %>
			<%= hidden_field(:page, :approval_status_id, value: EXECUTIVE_VALUE) %>
			<%= hidden_field(:page, :category_id, value: @page.category_review) %>
		</div>
		<%= f.submit "Executive Approve"%>
	<% end %>
<% end %>