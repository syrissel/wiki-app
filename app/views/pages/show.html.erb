

<%# render plain: params[:page].inspect %>
<%= stylesheet_link_tag :application, "https://cdn.quilljs.com/1.3.6/quill.snow.css"%>
<h1 class="form_group" id="show_title"><%= sanitize @page.title%></h1>
<div class="ql-snow">
<div class="form_group ql-editor"><%= sanitize @page.content %></div>
</div>
<%= link_to "Edit", edit_page_path, class: "edit_button" %>
<div>
	<ul>
		<li>Created by: <%= @page.user.username %> on <%= @page.created_at.strftime("%B %-d, %Y at %l:%M %p") %></li>
		<li>Last edited by: <%=  %></li>
	<ul>
</div>

<!-- Only a supervisor or ED can review a page. A supervisor cannot review a page they created. -->
<% if (current_user.user_level_id != INTERN_VALUE) && (current_user.id != @page.user_id) %>

	<%= form_for @page do |f| %>
		<div>
				<%= hidden_field(:page, :title, value: @page.title) %>
				<%= hidden_field(:page, :content, value: @page.content) %>
				<%= hidden_field(:page, :category_id, value: @page.category_id) %>
		</div>
		<%= f.label :approval_status_id %>
		<%= collection_select :page, :approval_status_id, ApprovalStatus.order(:status).where.not(id: EXECUTIVE_VALUE), :id, :status, prompt: true %>
		<div>
		<%= f.submit "Submit Status" %>
		</div>
	<% end %>

	

<% end %>

<% if current_user.user_level_id == EXECUTIVE_VALUE && @page.approval_status_id == SUPERVISOR_VALUE %>
		<%= form_for @page do |f| %>
			<div>
				<%= hidden_field(:page, :title, value: @page.title) %>
				<%= hidden_field(:page, :content, value: @page.content) %>
				<%= hidden_field(:page, :approval_status_id, value: EXECUTIVE_VALUE) %>
				<%= hidden_field(:page, :category_id, value: @page.category_id) %>
			</div>
			<%= f.submit "Executive Approve"%>
		<% end %>
	<% end %>



